!function(e,t,n,i){var s=function(){this.config={protocolVersion:"2.4",enableNotifyEvents:!1,eventDelayInterval:2e3,supportCollapse:!1,showTitle:!0,showLoadingAnimation:!0,showFeedback:!0,useProjectDefaultCurrency:!1,supportHtmlTagInProcessor:!0,dateFormat:"MM/DD/YY",amountFormat:"###,###,###",currencySymbol:"$"}};s.prototype.setConfig=function(e){for(var t in e)e.hasOwnProperty(t)&&(this.config[t]=e[t])},s.prototype.getConfig=function(e){return this.config[e]},s.prototype.getConfigValues=function(){return this.config},t.projectConfiguration=new s}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.projectConfiguration.setConfig({protocolVersion:"2.5",enableNotifyEvents:!1,supportCollapse:!1,showTitle:!1,showLoadingAnimation:!1,showFeedback:!0,imagePath:"../personetics-chase/resources/images/",amountFormat:"###,###,###.00"})}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){var s=function(){this.images={teaser_images:{default:"CG100",CG100:"CG100",Transport:"CG100",Transportion:"CG100",Transportation:"CG100",CG1000:"CG1000",Household:"CG1000",CG10000:"CG10000",Groceries:"CG10000",Supermarkets:"CG10000",CG2000:"CG700",Services:"CG700",CG300:"CG300",Utilities:"CG300",CG3000:"CG3000",Travel:"CG3000",CG500:"CG500",Entertainment:"CG500",CG600:"CG600",Shopping:"CG600",CG6000:"CG6000",Education:"CG6000",CG700:"CG700",Finances:"CG700",Finance:"CG700",CG8:"CG8",Taxes:"CG8",CG800:"CG800",Dining:"CG800",CG900:"CG900",Health:"CG900",HazarAttentionSign:"HazardAttentionSign",HazardAttentionSign:"HazardAttentionSign",IntroducePersonetics:"IntroducePersonetics",PersoAutomation:"PersoAutomation",PersoCards:"PersoCards",PersoCurrency:"PersoCurrency",PersoDeposit:"PersoDeposit",PersoExplain:"PersoExplain",Persofees:"Persofees",PersoFees:"Persofees",PersoMobileBanking:"PersoMobileBanking",PersoMobileWallet:"PersoMobileWallet",PersoQuiz:"PersoQuiz",PersoRefund:"PersoRefund",PersoSavings:"PersoSavings"},account_selector:{default:"cardImage",0:"cardImage"},icons:{default:"welcome","travel activity":"travel_activity","spend activity":"spend_activity",payments:"payments","debits _ purchases":"debits_purchases",credit_refunds:"credit_refunds","collections_past due":"collections_past_due","collection_past due":"collections_past_due","balance status":"balance_status","account info":"account_info"}}};s.prototype.getImageClass=function(e,n){var s={isAbsoluteURL:!1,url:e};if(typeof e!=i&&null!=e&&0==e.indexOf("http"))return s.isAbsoluteURL=!0,s;if(typeof n!=i&&this.images.hasOwnProperty(n)){var r=this.images[n];return s.url=r.hasOwnProperty(e)?r[e]:r.default,s}return t.log("Personetics.imageMap.getText('"+e+"', '"+n+"') Error: unknown "+n),s},s.prototype.overrideImages=function(e,t){if(this.images.hasOwnProperty(e))for(var n in t)t.hasOwnProperty(n)&&(this.images[e][n]=t[n]);else this.images[e]=t},t.imageMap=new s}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n){t.utils=t.utils?t.utils:{},t.utils.persoHelper={},t.utils.persoHelper.constants={ANDROID_VERSIONS:{OLD_VERSION_MIN_TARGET:4.4,OLD_VERSION_MAX_TARGET:5}},t.utils.persoHelper.getAndroidVersionNumber=function(){var e;return i()&&(e=parseFloat(i())),e},t.utils.persoHelper.isOldAndroidVersion=function(){var e=this.getAndroidVersionNumber(),t=!1;return void 0!==e&&e>0&&e<this.constants.ANDROID_VERSIONS.OLD_VERSION_MAX_TARGET&&e>=this.constants.ANDROID_VERSIONS.OLD_VERSION_MIN_TARGET&&(t=!0),t};var i=function(){var e=navigator.userAgent.toLowerCase().match(/android\s([0-9\.]*)/);return!!e&&e[1]}}(window,window.Personetics=window.Personetics||{}),function(e,t,n,i){t.utils=t.utils?t.utils:{},t.utils.accessibility={},t.utils.accessibility.isFocusable=function(e){if(n(e).is('[aria-hidden="true"], [aria-hidden="true"] *'))return!1;var t=n(e).contents().not(n(e).children()).text().trim().length>0;return!(!n(e).is(":input, [role], [aria-label], [aria-labelledby]")&&!t)},t.utils.accessibility.firstChildFocusable=function(e){if("undefind"==typeof e||null==e||0==e.length)return!1;var t=this,i=e.find("*"),s=!1;return n.each(i,function(e,n){if(1==(s=t.isFocusable(n)))return s=n,!1}),s},t.utils.accessibility.trackFocus=function(e){if(void 0!==e&&0!==e.length){var t,n=e.get(0),i=function(e){t="mousedown"===e.type},s=function(e){if(t){var n=e.target.getAttribute("class");e.target.setAttribute("class",n+" personetics-mouse-focus")}},r=function(e){var t=e.target.getAttribute("class");null!==t&&(t=t.replace(/ personetics-mouse-focus/g,""),e.target.setAttribute("class",t))};n.removeEventListener("keydown",i),n.removeEventListener("mousedown",i),n.removeEventListener("focusin",s),n.removeEventListener("focusout",r),n.addEventListener("keydown",i),n.addEventListener("mousedown",i),n.addEventListener("focusin",s),n.addEventListener("focusout",r)}}}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n){t.utils=t.utils?t.utils:{},t.utils.assert={},t.utils.assert.isUndefined=function(e){return void 0===e},t.utils.assert.isNullOrUndefined=function(e){return void 0===e||null==e},t.utils.assert.isTrue=function(e){return!t.utils.assert.isUndefined(e)&&1==e},t.utils.assert.isDefined=function(e,n){var i=!t.utils.assert.isUndefined(e);return i&&!t.utils.assert.isUndefined(n)&&null!=n&&(n||(i=null!=e)),i},t.utils.assert.AssertIsDefined=function(e,n){t.utils.assert.isNullOrUndefined(e)&&(n?t.utils.PLogger.error(n,n):t.utils.PLogger.error("Object is undefined","Object is undefined"))},t.utils.assert.assignDefaultValue=function(e,n){return t.utils.assert.isUndefined(e)?n:e},t.utils.assert.isObject=function(e){return"object"==typeof e},t.utils.assert.isString=function(e){return"string"==typeof e},t.utils.assert.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.utils.assert.isFunction=function(e){return"function"==typeof e},t.utils.assert.exists=function(e,t){for(var n=t.split("."),i=e,s=1;s<n.length;s++)i="undefined"==i?i:i[n[s]];return i},t.utils.assert.AssertIsNullOrUndefined=function(e,t){}}(window,window.Personetics=window.Personetics||{}),function(e,t,n,i){t.utils=t.utils||{},t.utils.d3Extensions={};var s=t.utils.persoHelper;t.utils.d3Extensions.html=function(e){if("string"==typeof e){var t=n("<span>").html(e).first().children()[0];if(void 0===t)this.text(e);else{var i=this.append("tspan"),s=t.attributes;n.each(s,function(e,t){i.attr(t.name,t.value)});var r=n(t).children();n.each(r,function(e,t){var s=i.append("tspan").text(n(t).text()),r=t.attributes;n.each(r,function(e,t){s.attr(t.name,t.value)})})}}},d3.selection.prototype.html=t.utils.d3Extensions.html,t.utils.d3Extensions.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);t=n(t).length>0?n(t)[0].innerText:t,this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=n(e).length>0?n(e)[0].innerText:e}):this.textContent},void 0!==s&&s.isOldAndroidVersion()&&(d3.selection.prototype.text=t.utils.d3Extensions.text)}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n){var i=[1,2,3,4,5,6,7,8,9,10,11,12],s={"en-short":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],en:["January","February","March","April","May","June","July","August","September","October","November","December"],he:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],"he-short":["ינו'","פבר'","מרץ","אפר'","מאי","יונ'","יול'","אוג'","ספט'","אוק'","נוב'","דצמ'"],fr:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],"fr-short":["Jan","Fév","Mar","Avr","Mai","Jun","Jul","Aoû","Sep","Oct","Nov","Déc"],es:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],"es-short":["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"]};t.utils=t.utils?t.utils:{},t.utils.date={},t.utils.date.monthName=function(e,t,n){if(parseInt(e)!=e){var i=new Date(e),r=i.getMonth();null==r||null==r||isNaN(r)||(r=i.getMonth())}else try{var o=parseInt(e);if(!(o>=1&&o<=12))return e;r=o-1}catch(t){return e}1==n&&(t+="-short");var a=s[t];return a||(a=1==n?s["en-short"]:s.en),a[r]},t.utils.date.dayNumber=function(e,t){var n=e,i=new Date(e),s=i.getDate();return isNaN(s)||(n=i.getDate()),t&&"DD"==t&&n<10&&(n="0"+n),n},t.utils.date.monthNumber=function(e){if(parseInt(e)!=e){var t=new Date(e),n=t.getMonth();null==n||null==n||isNaN(n)||(n=t.getMonth())}else try{var s=parseInt(e);if(!(s>=1&&s<=12))return e;n=s-1}catch(t){return e}var r=i[n],o=r;return r<10&&(o="0"+o),o},t.utils.date.yearNumber=function(e,t){var n=new Date(e).getFullYear().toString();return t?n.substring(2):n},t.utils.date.nthDate=function(e,t){e=e.toLowerCase();for(var n=t+"-short",i=0;i<s[n].length&&-1===e.indexOf(s[n][i].toLowerCase());i++);var r=e.replace(s[n][i].toLowerCase(),""),o=s[t][i];return/^\d+$/.test(r)?o+" "+(r=parseInt(r,10))+function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(r):o}}(window,window.Personetics=window.Personetics||{}),function(e,t,n,i){t.utils=t.utils?t.utils:{},t.utils.dictionary={},t.utils.dictionary.overrideObjectProperties=function(e,i,s){t.utils.assert.assignDefaultValue(s,!0);var r=n.extend({},!0,e);return t.utils.assert.isNullOrUndefined(i)?r:t.utils.assert.isNullOrUndefined(r)?i:(n.each(i,function(e,t){r.hasOwnProperty(e)&&null!=r[e]&&!s||(r[e]=t)}),r)},t.utils.dictionary.hasItem=function(e,n,i){var s=t.utils.assert.isObject(e)&&t.utils.string.isValidString(n)&&e.hasOwnProperty(n);return i?s:s&&null!=e[n]},t.utils.dictionary.exists=function(e){for(var t=Array.prototype.slice.call(arguments,1),n=0;n<t.length;n++){if(!e||!e.hasOwnProperty(t[n]))return!1;e=e[t[n]]}return!0},t.utils.dictionary.removeInvalids=function(e){var i={};return void 0!==e&&e&&n.each(e,function(e,n){null!=n&&(t.utils.assert.isObject(n)&&!t.utils.assert.isArray(n)?i[e]=t.utils.dictionary.removeInvalids(n):i[e]=n)}),i}}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.utils=t.utils?t.utils:{},t.utils.encodeDecode={},t.utils.encodeDecode.Base64={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){for(var n=new t.utils.string.StringBuffer,i=new t.utils.encodeDecode.Utf8EncodeEnumerator(e);i.moveNext();){var s=i.current;i.moveNext();var r=i.current;i.moveNext();var o=i.current,a=s>>2,l=(3&s)<<4|r>>4,c=(15&r)<<2|o>>6,u=63&o;isNaN(r)?c=u=64:isNaN(o)&&(u=64),n.append(this.codex.charAt(a)+this.codex.charAt(l)+this.codex.charAt(c)+this.codex.charAt(u))}return n.toString()},decode:function(e){for(var n=new t.utils.string.StringBuffer,i=new t.utils.encodeDecode.Base64DecodeEnumerator(e);i.moveNext();){var s=i.current;if(s<128)n.append(String.fromCharCode(s));else if(s>191&&s<224){i.moveNext();var r=i.current;n.append(String.fromCharCode((31&s)<<6|63&r))}else{i.moveNext();r=i.current;i.moveNext();var o=i.current;n.append(String.fromCharCode((15&s)<<12|(63&r)<<6|63&o))}}return n.toString()}},t.utils.encodeDecode.Utf8EncodeEnumerator=function(e){this._input=e,this._index=-1,this._buffer=[],this.current=Number.NaN,this.moveNext=function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=Number.NaN,!1;var e=this._input.charCodeAt(++this._index);return 13==e&&10==this._input.charCodeAt(this._index+1)&&(e=10,this._index+=2),e<128?this.current=e:e>127&&e<2048?(this.current=e>>6|192,this._buffer.push(63&e|128)):(this.current=e>>12|224,this._buffer.push(e>>6&63|128),this._buffer.push(63&e|128)),!0}},t.utils.encodeDecode.Base64DecodeEnumerator=function(e){this._input=e,this._index=-1,this._buffer=[],this.current=64,this.moveNext=function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=64,!1;var e=t.utils.encodeDecode.Base64.codex.indexOf(this._input.charAt(++this._index)),n=t.utils.encodeDecode.Base64.codex.indexOf(this._input.charAt(++this._index)),i=t.utils.encodeDecode.Base64.codex.indexOf(this._input.charAt(++this._index)),s=t.utils.encodeDecode.Base64.codex.indexOf(this._input.charAt(++this._index)),r=e<<2|n>>4,o=(15&n)<<4|i>>2,a=(3&i)<<6|s;return this.current=r,64!=i&&this._buffer.push(o),64!=s&&this._buffer.push(a),!0}}}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.utils=t.utils?t.utils:{},t.utils.json={};var s=e.JSON||{};e.JSON=s,s.stringify=s.stringify||function(e){var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,i,r=[],o=e&&e.constructor==Array;for(n in e)e.hasOwnProperty(n)&&("string"==(t=typeof(i=e[n]))?i='"'+i+'"':"object"==t&&null!==i&&(i=s.stringify(i)),r.push((o?"":'"'+n+'":')+String(i)));return(o?"[":"{")+String(r)+(o?"]":"}")},t.utils.json.getJsonStringifyMethod=function(){return n.toJSON?n.toJSON:s.stringify},t.utils.json.toJSON=function(e){var n=t.utils.json.getJsonStringifyMethod();if("undefined"!=typeof Prototype&&void 0!==Array.prototype.toJSON){var i=Array.prototype.toJSON;delete Array.prototype.toJSON;var s=n(e);return Array.prototype.toJSON=i,s}return n(e)},t.utils.json.replacer=function(e,t,n,i,s){var r=t||"";return n&&(r=r+"<span class=json-key>"+n.replace(/[": ]/g,"")+"</span>: "),i&&(r=r+('"'==i[0]?"<span class=json-string>":"<span class=json-value>")+i+"</span>"),r+(s||"")},t.utils.json.prettyPrint=function(e){return s.stringify(e,null,3).replace(/&/g,"&amp;").replace(/\\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/^( *)("[\w.+-]+": )?("[^"]*"|[\w.+-]*)?([,[{])?$/gm,t.utils.json.replacer)},t.utils.json.mergeString=function(e,n){var i=s.parse(e),r=s.parse(n),o=t.utils.json.mergeObject(i,r);return t.utils.json.toJSON(o)},t.utils.json.mergeObject=function(e,t){return n.extend({},e,t)},t.utils.json.mergeDeepObject=function(e,t){return n.extend(!0,{},e,t)}}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n){t.utils=t.utils||{},t.PLoggerModes={VERBOSE:{name:"VERBOSE",value:1},DEBUG:{name:"DEBUG",value:2},ALERT:{name:"ALERT",value:3},ERROR:{name:"ERROR",value:4},PRODUCTION:{name:"PRODUCTION",value:5}};var i=function(){this.mode=t.PLoggerModes.ERROR.value};i.prototype.setDebugMode=function(e){null!=e&&e.hasOwnProperty("name")&&t.PLoggerModes.hasOwnProperty(e.name)&&(this.mode=e.value)},i.prototype.verbose=function(e){this.mode<=t.PLoggerModes.VERBOSE.value&&console.log(e)},i.prototype.debug=function(e){this.mode<=t.PLoggerModes.DEBUG.value&&console.log(e)},i.prototype.error=function(e,n,i){if(this.mode<=t.PLoggerModes.ERROR.value){if(void 0===i||!i.hasOwnProperty("shouldDisplayError")||void 0===i.shouldDisplayError||i.shouldDisplayError)t.processor.PStoryConfig.getConfig("context")?s(e):console.error("<< ERROR >>: "+e);if(t.utils.assert.isDefined(n,!1))throw n}},i.prototype.alert=function(e){this.mode<=t.PLoggerModes.ALERT.value&&alert(e)};var s=function(e){var n=t.processor.PStoryConfig.getConfig("context").toLowerCase(),i=this[t.processor.PStoryConfig.getConfig("serverCallBack")];if("server"===n){if("function"!=typeof i)throw e;i(e)}else{if("function"!=typeof i)throw'Error - invalid value for key "context", it should be "SERVER" \nProcessor error - '+e;i('Error - invalid value for key "context", it should be "SERVER" \nProcessor error - '+e)}};t.utils.PLogger=new i,t.verbose=t.utils.PLogger.verbose.bind(t.utils.PLogger),t.log=t.utils.PLogger.debug.bind(t.utils.PLogger),t.debug=t.utils.PLogger.debug.bind(t.utils.PLogger),t.error=t.utils.PLogger.error.bind(t.utils.PLogger),t.alert=t.utils.PLogger.alert.bind(t.utils.PLogger)}(window,window.Personetics=window.Personetics||{}),function(e,t,n,i){t.utils=t.utils?t.utils:{},t.utils.messages={},t.utils.messages.errorMessage=function(e){var n=t.UI.Handlebars.templates[e&&e.templateId?e.templateId:"error-msg"];if("undefined"!=typeof personetics&&null!==personetics&&personetics.hasOwnProperty("getDeviceType"))var i=personetics.getDeviceType()||"web";return n("web"===i?{textLarge:e.textLarge,textSmall:e.textSmall,imgClass:e.imgClass}:{textLarge:e.textLarge,textSmall:e.textSmall,imgClass:e.imgClass,isMobileDevice:!0})},t.utils.messages.noInsightsMessage=function(e){var n=t.UI.Handlebars.templates[e&&e.templateId?e.templateId:"no-insights-message"];if("undefined"!=typeof personetics&&null!==personetics&&personetics.hasOwnProperty("getDeviceType"))var i=personetics.getDeviceType()||"web";return n("web"===i?{textLarge:e.textLarge,textSmall:e.textSmall,imgClass:e.imgClass}:{textLarge:e.textLarge,textSmall:e.textSmall,imgClass:e.imgClass,isMobileDevice:!0})},t.utils.messages.noFilteredInsightsMessage=function(e){var n=t.UI.Handlebars.templates[e&&e.templateId?e.templateId:"no-filtered-insights-msg"];if("undefined"!=typeof personetics&&null!==personetics&&personetics.hasOwnProperty("getDeviceType"))var i=personetics.getDeviceType()||"web";return n("web"===i?{text:e.text}:{text:e.text,isMobileDevice:!0})}}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.utils=t.utils?t.utils:{},t.utils.network={},t.utils.network.consts={base64EncodeResponse:!1,requestTimeoutInMillis:3e5,dataType:"json",async:!0,onComplete:function(){},onSuccess:function(e,n,i){t.log("request success")},onFailure:function(e,n,i){t.log("request failed: "+n+", "+i)}},t.utils.network.doAjaxGet=function(e,i,s){var r=t.utils.dictionary.overrideObjectProperties(s,t.utils.network.consts,!1);t.utils.assert.AssertIsDefined(e,"Personetics.utils.network.doAjaxGet: invalid request URL: "+e);var o={type:"GET",url:e,dataType:r.dataType,async:r.async,timeout:r.requestTimeoutInMillis,complete:r.onComplete,success:function(e){var i=e;1==r.base64EncodeResponse&&(i=t.utils.network.decodeDataWithBase64(e),i=n.parseJSON(i));r.onSuccess(i)},error:function(e,t,n){r.onFailure(e,t,n)}};t.utils.assert.isNullOrUndefined(i)||(o.data=i),n.ajax(o)},t.utils.network.doAjaxPost=function(e,i,s){var r=t.utils.dictionary.overrideObjectProperties(s,t.utils.network.consts,!1);t.utils.assert.AssertIsNullOrUndefined(e,"Personetics.utils.network.doAjaxPost: invalid request URL: "+e),n.ajax({type:"POST",url:e,data:i,dataType:r.dataType,async:r.async,headers:r.headers,timeout:r.requestTimeoutInMillis,complete:r.onComplete,success:function(e){var i=e;1==r.base64EncodeResponse&&(i=t.utils.network.decodeDataWithBase64(e),i=n.parseJSON(i));r.onSuccess(i)},error:function(e,t,n){r.onFailure(e,t,n)}})},t.utils.network.queueAjaxPost=function(e,i,s,r){var o=t.utils.dictionary.overrideObjectProperties(r,t.utils.network.consts,!1);return n.ajaxq(e,{type:"POST",url:i,data:s,dataType:o.dataType,timeout:o.requestTimeoutInMillis,success:function(e){var i=e;1==o.base64EncodeResponse&&(i=t.utils.network.decodeDataWithBase64(e),i=n.parseJSON(i));o.onSuccess(i)},error:function(e,t,n){o.onFailure(e,t,n)}})},t.utils.network.removeAjaxPostQueue=function(e){n.ajaxq(e)},t.utils.network.wasUserAborted=function(e,t){return!e.getAllResponseHeaders()&&"timeout"!=t},t.utils.network.createPostform=function(e,t,n,i,s){n.charset="utf-8";var r=n.createElement("form");for(var o in r.setAttribute("id","hintForm"),r.setAttribute("method","post"),r.setAttribute("action",t),e)if(e.hasOwnProperty(o)){var a=n.createElement("input");a.type="hidden",a.name=o,a.value=e[o],r.appendChild(a)}n.body.appendChild(r),r.submit(),n.body.removeChild(r)},t.utils.network.decodeDataWithBase64=function(e){return e=(e=e.replace(/(\r\n|\n|\r)/gm,"")).replace(/"/g,""),t.utils.encodeDecode.Base64.decode(e)}}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){function s(e,t,n){var i=r({width:e.clientWidth,height:e.clientHeight,totalHeight:n.height}),s=n.x?n.x:0,o=n.y?n.y:0;t.addHTML(e,s,o,{pagesplit:!0,canvas:i},function(){i.parentElement&&n.parent.removeChild(i),t.save(n.fileName+n.format),n.callback&&n.callback()})}function r(e){var t=document.createElement("canvas");t.width=3*e.width,t.height=3*e.totalHeight,t.style.width=e.width+"px",t.style.height=e.height+"px";var n=t.getContext("2d");return n.scale(3,3),n.fillStyle="rgba(255, 255, 255, 1)",n.fillRect(0,0,t.width,t.height),t}function o(e,t,n){var i=document.createElement("canvas");i.width=3*t,i.height=3*n,i.style.width=t+"px",i.style.height=n+"px";var s=i.getContext("2d");return s.scale(3,3),s.fillStyle="rgba(255, 255, 255, 1)",s.fillRect(0,0,i.width,i.height),s.drawImage(e,0,0),i}t.utils=t.utils?t.utils:{},t.utils.print={},t.utils.print.printHtmlToPdf=function(e){var t=new jsPDF("p","pt","a4");t.addFont("Roboto"),t.setFont("Roboto");var n=e.parent;if(e.page&&e.page.el){var i=e.page.el;r=e.parent.getElementsByTagName("*");e.beforeExportCallback&&e.beforeExportCallback(r),html2canvas(i,{allowTaint:!1,useCORS:!0}).then(function(r){t.internal.scaleFactor=e.page.internalScaleFactor;var a=o(r,i.clientWidth,i.clientHeight);e.parent.appendChild(a);var l=e.x?e.x:0,c=e.y?e.y:0;t.addHTML(a,l,c,{pagesplit:!0,allowTaint:!1,useCORS:!0},function(){a.parentElement&&e.parent.removeChild(a),i.parentNode.removeChild(i),t.addPage(),t.internal.scaleFactor=e.internalScaleFactor,s(n,t,e)})})}else{var r=e.parent.getElementsByTagName("*");e.beforeExportCallback&&e.beforeExportCallback(r),t.internal.scaleFactor=e.internalScaleFactor,s(n,t,e)}},t.utils.print.printHtmlToPdfWithLoop=function(t){var n=new jsPDF("p","pt","a4"),i=t.parent;if(t.page&&t.page.html){n.internal.scaleFactor=2.5;var s=document.createElement("div");s.innerHTML=t.page.html;var a=s.firstChild;a.style.width=t.page.width,t.parent.appendChild(a);for(var l=a.getElementsByTagName("*"),c=0;c<l.length;c++)"none"!==e.getComputedStyle(l[c],null).getPropertyValue("background-image")&&(l[c].style.backgroundImage="none");html2canvas(a,{allowTaint:!1,useCORS:!0}).then(function(e){n.internal.scaleFactor=1;var s=o(e,a.clientWidth,a.clientHeight);t.parent.appendChild(s),n.addHTML(s,0,0,{pagesplit:!0,allowTaint:!1,useCORS:!0},function(){s.parentElement&&t.parent.removeChild(s),a.parentNode.removeChild(a),n.addPage(),n.internal.scaleFactor=3.75;var e=r({width:i.clientWidth,height:i.clientHeight,totalHeight:t.height});n.addHTML(i,{pagesplit:!0,canvas:e},function(){n.save(t.fileName+t.format),t.callback&&t.callback()})})})}else{n.internal.scaleFactor=3.75;var u=t.parent.getElementsByClassName("pstory-dialog-content"),d=r({width:i.clientWidth,height:i.clientHeight,totalHeight:t.height});n.addHTML(u[0],{pagesplit:!0,canvas:d},function(){d.parentElement&&t.parent.removeChild(d),function e(t,n,i,s){if(i==n.length)return t.save(s.fileName+s.format),void(s.callback&&s.callback());t.addPage();html2canvas(n[i],{allowTaint:!1,useCORS:!0}).then(function(r){t.internal.scaleFactor=1;var a=o(r,n[i].clientWidth,n[i].clientHeight);s.parent.appendChild(a),t.addHTML(a,0,0,{pagesplit:!0,allowTaint:!1,useCORS:!0},function(){a.parentElement&&s.parent.removeChild(a),e(t,n,i+1,s)})})}(n,u,1,t)})}}}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.utils=t.utils?t.utils:{},t.utils.scope={},t.utils.scope.bind=function(e,t){return function(){return t.apply(e,arguments)}},t.bind=t.utils.scope.bind,t.utils.scope.Callback=function(e,t){this.parameters=t,this.f=e;var n=this;this.invoke=function(){n.f.apply(n,n.parameters)}}}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.utils=t.utils?t.utils:{},t.utils.string={},t.utils.string.isString=function(e){return"string"==typeof e},t.utils.string.isEmpty=function(e){return t.utils.string.isString(e)&&0==e.length},t.utils.string.isValidString=function(e){return t.utils.assert.isString(e)&&null!=e&&e.length>0},t.utils.string.truncateLongWords=function(e,t){if(void 0!==e&&e&&e.length>0&&e.replace(/ /g,"").length>0){var i=e.split(" "),s=[];return n.each(i,function(e,n){n.length>t?s.push(n.substring(0,t-6)+"..."):s.push(n)}),s.join(" ")}return""},t.utils.string.stripTags=function(e){var t=["script"],i=e;return void 0!==e&&null!=e&&e.length>0&&n.each(t,function(e,n){var s=new RegExp("<"+t+".*>.*</"+n+">","ig");i=i.replace(s,"")}),i},t.utils.string.replaceNewLine=function(e){if(!e)return e;var i=typeof e;if("string"==i){var s=new RegExp("^<([A-Z][A-Z0-9]*)[^>]*>(.*?)</\\1>$","gim").exec(e.replace(/\n/g,""));e=s?e.replace(/\n/g,""):e.replace(/\n/g,"<br />")}else"object"==i&&n.each(e,function(n,i){if(i&&("string"!=typeof n||-1==n.toLowerCase().indexOf("speaking"))){e[n]=t.utils.string.replaceNewLine(i)}});return e},t.utils.string.StringBuffer=function(){this.buffer=[],this.append=function(e){return this.buffer.push(e),this},this.toString=function(){return this.buffer.join("")}},t.utils.string.decodeHTMLSpecialCharecters=function(e){return e.replace("&amp;","&")},t.utils.string.stripSpecialChars=function(e){return e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-")},t.utils.string.removeClass=function(e,t){var n=e;return"object"==typeof e&&(n=n.animVal),n=n.replace(new RegExp("(?:^|\\s)"+t+"(?:\\s|$)")," ")},t.utils.string.addClass=function(e,n){var i=e=t.utils.string.removeClass(e,n);return"object"==typeof e&&(i=i.animVal),i+=" "+n}}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.utils=t.utils?t.utils:{},t.utils.url={},t.utils.url.getParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null==t?null:decodeURIComponent(t[1].replace(/\+/g," "))},t.utils.url.getAbsoluteUrl=function(t){if(/^(https?|file|ftps?|mailto|javascript|data:image\/[^;]{2,9};):/i.test(t))return t;for(var n=e.location.href.split("/"),i="",s=0;s<n.length-1;s++)0!=s&&(i+="/"),i+=n[s];return i+"/"+t},t.utils.url.openTabWithPost=function(n,i,s){var r=t.utils.url.getAbsoluteUrl(n),o=e.open("","_blank");o.opener=null,o.focus();var a=o.document;t.utils.network.createPostform(name,s,r,a)},t.utils.url.iframeWithPost=function(e,t,n){var i=document.createElement("form");for(var s in i.setAttribute("method","post"),i.setAttribute("action",e),i.setAttribute("target",t),n)if(n.hasOwnProperty(s)){var r=document.createElement("input");r.type="hidden",r.name=s,r.value=n[s],i.appendChild(r)}document.body.appendChild(i),i.submit(),document.body.removeChild(i)},t.utils.url.urlCheck=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},t.utils.url.encodePostParams=function(e){return n.each(e,t.bind(this,function(n,i){if(n.indexOf("64")>=0){var s=t.utils.json.toJSON(e[n]),r=t.utils.encodeDecode.Base64.encode(s);e[n]=r}})),e}}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){var s=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[r.charAt(n>>>18),r.charAt(n>>>12&63),t>=2?"=":r.charAt(n>>>6&63),t>=1?"=":r.charAt(63&n)].join("")},a=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?s(192|t>>>6)+s(128|63&t):s(224|t>>>12&15)+s(128|t>>>6&63)+s(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return s(240|t>>>18&7)+s(128|t>>>12&63)+s(128|t>>>6&63)+s(128|63&t)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,c=function(e){return function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}(e.replace(l,a).replace(/[\s\S]{1,3}/g,o))},u=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),d=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return s(55296+(t>>>10))+s(56320+(1023&t));case 3:return s((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return s((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},h=function(e){for(var t={},n=0,i=e.length;n<i;n++)t[e.charAt(n)]=n;return t}(r),g=function(e){var t=e.length,n=t%4,i=(t>0?h[e.charAt(0)]<<18:0)|(t>1?h[e.charAt(1)]<<12:0)|(t>2?h[e.charAt(2)]<<6:0)|(t>3?h[e.charAt(3)]:0),r=[s(i>>>16),s(i>>>8&255),s(255&i)];return r.length-=[0,0,2,1][n],r.join("")},p=function(e){return e.replace(/[\s\S]{1,4}/g,g).replace(u,d)};t.utils=t.utils?t.utils:{},t.utils.encodeDecode={},t.utils.encodeDecode.Base64={encode:function(e,t){return t?c(e).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):c(e)},decode:function(e){return e=function(e){var t,n,i="",s=0;for(t=n=0;s<e.length;)(t=e.charCodeAt(s))<128?(i+=String.fromCharCode(t),s++):t>191&&t<224?(n=e.charCodeAt(s+1),i+=String.fromCharCode((31&t)<<6|63&n),s+=2):(n=e.charCodeAt(s+1),c3=e.charCodeAt(s+2),i+=String.fromCharCode((15&t)<<12|(63&n)<<6|63&c3),s+=3);return i}(e),p(e.replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))}}}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.utils=t.utils?t.utils:{},t.utils.PEvent=Base.extend({initialize:function(){this.eventMessage={type:"sendEvents",eventInfo:{},checkInPastEvent:!0}},setParam:function(e,t){this.eventMessage.eventInfo.params[e]=t},getJsonMessageEvent:function(){return JSON.stringify(this.eventMessage)},onSuccessCallback:function(){},onErrorCallback:function(){}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.utils=t.utils?t.utils:{},t.utils.PEventsBuffer=function(){this.sendEventsTypesMapping={"account-selector":"AccountSelector","bar-chart":"BarChart","pie-chart":"PieChart",tabs:"Button",buttons:"Button",Navigation:"NavigateButton"},this.pastEvents=[],this.eventToSend=[],this.eventDelayInterval=t.projectConfiguration.getConfig("eventDelayInterval"),this.start=function(){var e=this;this.intervalId=setInterval(function(){e.sendEvents()},this.eventDelayInterval)},this.stop=function(){this.intervalId&&clearInterval(this.intervalId)},this.addEventToSend=function(e,t,n){1==this.shouldSendEvent(e)&&(this.eventToSend.push({eventData:e,onSuccessCallback:t,onErrorCallback:n}),"Navigation"===e.eventMessage.eventInfo.type&&this.sendEvents())},this.sendEvents=function(){var e=this,i=!1,s={},r=[];this.eventToSend.length&&(s.type=this.eventToSend[0].eventData.eventMessage.type,s.ctxId="dashboard",s.lang=t.processor.PStoryConfig.getConfig("lang"),s.protocolVersion=this.eventToSend[0].eventData.eventMessage.protocolVersion),n.each(this.eventToSend,function(t,n){void 0!==e.sendEventsTypesMapping[n.eventData.eventMessage.eventInfo.type]&&(n.eventData.eventMessage.eventInfo.type=e.sendEventsTypesMapping[n.eventData.eventMessage.eventInfo.type]),r.push(n.eventData.eventMessage.eventInfo),e.pastEvents.push(n)}),r.length&&(i=!0,s.eventsInfoList=r,personetics.pserverProxy.notifyEvent(s,this.onSuccess,this.onError)),1==i&&(this.eventToSend=[])},this.onSuccess=function(){},this.onError=function(){},this.shouldSendEvent=function(e){var t=!0,i=JSON.stringify(e.eventMessage.eventInfo);return 1==e.eventMessage.checkInPastEvent&&n.each(this.pastEvents,function(e,n){var s=n.eventData.eventMessage.eventInfo;if(JSON.stringify(s)===i)return t=!1,!1}),0==t?t:(n.each(this.eventToSend,function(e,n){var s=n.eventData.eventMessage.eventInfo;if(JSON.stringify(s)===JSON.stringify(i))return t=!1,!1}),t)},this.onEventSendSuccess=function(){},this.onEventSendError=function(){t.log("Error on sending events to PServer....")}}}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.utils=t.utils?t.utils:{},t.utils.PEventOptInOut=t.utils.PEvent.extend({initialize:function(){this.eventMessage={type:"sendEvents",eventInfo:{type:"opt-in",params:{}},checkInPastEvent:!1}},setOptInParam:function(e){var t="in";t=1==e?"in":"out",this.eventMessage.eventInfo.params.isOptIn=t},setSentTime:function(){this.eventMessage.eventInfo.params.timestamp=new Date},getJsonMessageEvent:function(){return JSON.stringify(this.eventMessage)},onSuccessCallback:function(){},onErrorCallback:function(){}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.utils=t.utils?t.utils:{};var s=t.utils.PEvent.extend({initialize:function(){this.params={eventType:"sendEvents",checkInPastEvent:"false",protocolVersion:t.projectConfiguration.getConfig("protocolVersion"),userId:"",type:"",value:"",insightId:"",instanceId:""}},setValue:function(e){var t=this;n.each(e,function(e,n){t.params.hasOwnProperty(e)&&"undefined"!=n&&null!=n&&(t.params[e]=n)})},createMessage:function(){var e=this.params;return{type:e.eventType,userId:e.userId,checkInPastEvent:e.checkInPastEvent,protocolVersion:e.protocolVersion,eventInfo:{type:e.type,eventDateTime:new Date,params:{value:e.value,insightId:e.insightId,instanceId:e.instanceId}}}},notifyEvent:function(){var e={eventMessage:this.createMessage()};personetics.notifyEvent(e)}});t.utils.PEventReporting=new s}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.story=t.story||{},t.story.PWebAnalytics=Base.extend({reportWidgetActive:function(e){},reportWidgetLoaded:function(e){},reportOverlayLoaded:function(e){},reportRatingsSent:function(e){}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.API=t.API||{},t.API.PServerProxy=Base.extend({initialize:function(){this.okStatus="200",this.delay=3e3,this.requestDataType="json",this.pserverURL="",this.servletName="",this.requestHeaders={"Content-Type":"application/json; charset=UTF-8"},this.requestParams={},this.config={},this.postData={}},start:function(e){this.config=n.extend(!0,this.config,e),this.config.protocolVersion&&(this.postData.protocolVersion=this.config.protocolVersion),this.config.lang&&(this.postData.lang=this.config.lang),this.config.deviceType&&(this.postData.deviceType=this.config.deviceType),this.requestHeaders=n.extend(!0,this.requestHeaders,e.requestHeaders),this.requestParams=n.extend(!0,this.requestParams,e.requestParams),e.jwt&&(this.config.requestHeaders.Authorization="Bearer "+e.jwt),e.userId&&(this.config.requestHeaders.authToken=e.userId),this.pserverURL=e.pserverUrl,this.base64EncodeResponse=!0,void 0===e.base64EncodeResponse&&null!==e.base64EncodeResponse||(this.base64EncodeResponse=e.base64EncodeResponse),this.requestDataType=this.base64EncodeResponse?"text":"json"},createURL:function(e,t){var i=this.pserverURL+this.servletName;return t&&(i+="?"+n.param(t)),i},notifyEvent:function(e,t,n){var i={postData:e};this.getData(i,t,n)},getDataSuccessCallback:function(e,i,s){if(e){var r=e;this.base64EncodeResponse?r=JSON.parse(t.utils.encodeDecode.Base64.decode(e)):t.utils.assert.isString(e)&&(r=JSON.parse(e)),t.log("---response:---\n"+JSON.stringify(r));var o=r.status,a=r.ok,l=o&&o==this.okStatus||a&&1==a;r&&l?n.isFunction(i)&&i(r):this.onError(s,r)}else this.onError(s,e)},getDataFailureCallback:function(e,n,i,s,r){t.utils.PLogger.error(n),this.onError(r,n)},onError:function(e,t){var i=personetics.getJSBridge();i.hasOwnProperty("sessionError")&&n.isFunction(i.sessionError)&&i.sessionError(t),void 0!==e&&n.isFunction(e)&&e(t)},prepareData:function(e){var t=n.extend(!0,{},this.postData,e.postData),i=e.requestParams;return{reqUrl:this.createURL(t,i),postData:JSON.stringify(t)}},sendRequest:function(e,n,i){t.log("---request url: "+e.reqUrl+" data: ",JSON.stringify(e.data));var s=this;t.utils.network.doAjaxPost(e.reqUrl,e.postData,{dataType:this.requestDataType,headers:s.requestHeaders,onSuccess:function(e){s.getDataSuccessCallback(e,n,i)},onFailure:function(e,t,r){s.getDataFailureCallback(e,t,r,n,i)}})},getData:function(e,t,n){-1!==["getInsights","getInboxInsights","getInsightDetails","getNumberOFInsight"].indexOf(e.postData.type)&&(e.postData.ctxId=this.config.ctxId);var i=this.prepareData(e);this.sendRequest(i,t,n)}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){var s=t.UI.Handlebars;t.UI.PWidgetCtrl=Base.extend({initialize:function(e){this.config=e,this.widgetId=this.config.widgetId,this.parentCtrl=e.parentCtrl},sendWidgetEvent:function(e){e.widgetId=this.widgetId,"undefined"!=typeof personetics&&null!==personetics&&personetics.hasOwnProperty("sendWidgetEvent")?personetics.sendWidgetEvent(this,e):t.utils.PLogger.debug("personetics JS API is not available")},getTemplateHtml:function(e,t){return this.getTemplate(e)(t)},getTemplate:function(e){var t=this.getPrecompiledTemplate(e);if(!t)throw"Unknown template '"+e+"'";return t},getPrecompiledTemplate:function(e){var t=e;return"#"==t.substr(0,1)&&(t=t.substr(1)),s.templates[t]}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.UI=t.UI||{};var s=Base.extend({widgetFactoryMap:{},counter:0,registerWidget:function(e,t,n){if(void 0!==n)this.registerWidgetDeprecated(e,t,n);else{var i=this.widgetFactoryMap[e];i||(i={type:e,name:t.widgetName,widthModes:{}},this.widgetFactoryMap[e]=i),t.widthMode?i.widthModes[t.widthMode]=t.widgetClass:i.widgetClass=t.widgetClass}},createWidget:function(e,t){var n=this.widgetFactoryMap[e],i=null;if(n){if(n.class)return this.createWidgetDeprecated(e,t);t.hasOwnProperty("widthMode")&&void 0!==t.widthMode&&null!==t.widthMode&&t.widthMode.length>0&&(i=n.widthModes[t.widthMode]),i||(i=n.widgetClass)}if(i)return new i(t);throw"Personetics.UI.PWidgetFactory.createWidget() - Invalid widget type '"+e+"'"},registerWidgetDeprecated:function(e,t,n){e&&e.length>0&&t&&(this.widgetFactoryMap[e]={class:t,name:n||e})},createWidgetDeprecated:function(e,t){if(this.widgetFactoryMap.hasOwnProperty(e)){var n=this.widgetFactoryMap[e].class,i=e+"_"+Date.now()+"_"+this.counter;return this.counter++,t.widgetId=i,new n(t)}throw"Personetics.UI.PWidgetFactory.createWidget() - Invalid widget type '"+e+"'"}});t.UI.PWidgetFactory=new s}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.API=t.API||{},t.API.personetics=new function(){this.isInitialized=!1,this.pserverProxyClassName=null,this.config={protocolVersion:t.projectConfiguration.getConfig("protocolVersion"),enableNotifyEvents:t.projectConfiguration.getConfig("enableNotifyEvents")},this.urls={INSIGHTS_SERVLET:"/insights/",STORY_SERVLET:"/story/",EXECUTE_SERVLET:"/execute",SERVICE_SERVLET:"/service/",INIT_PERSONETICS:"initPersonetics",GET_INSIGHTS:"getInsights",GET_INBOX_INSIGHTS:"getInboxInsights",GENERATE_INSIGHTS:"generateInsights",GET_INSIGHT_RATINGS:"getInsightRating",UPDATE_INSIGHT_RATINGS:"updateInsightRating",UPDATE_INSIGHT_FEEDBACK:"updateInsightFeedback",GET_INSIGHT_STORY:"getInsightStory",GET_INSIGHT_DETAILS:"getInsightDetails",GET_INSIGHT_STORY_DATA:"getInsightStoryData",GET_INSIGHT_STORY_DEFINITION:"getInsightStoryDefinition",GET_INSIGHT_STORY_TEXTS:"getInsightStoryTexts",GET_STORY_QUERY_DATA:"getStoryQueryData",GET_MESSAGE_HISTORY:"messageHistory"},this.initialize=function(e,i,s){if(this.config=n.extend(!0,this.config,e),this.config.requestHeaders=this.config.requestHeaders||{},this.config.requestHeaders.authToken=this.config.userId,this.isInitialized)i();else{t.utils.PLogger.setDebugMode(e.debugMode),t.log("personetics.initialize() called");var r=this.pserverProxyClassName;r?this.pserverProxy=new r:void 0!==t.API.PServerProxyNative&&t.API.PServerProxyNative?this.pserverProxy=new t.API.PServerProxyNative:this.pserverProxy=new t.API.PServerProxy,this.pserverProxy.start(this.config),this.config.hasOwnProperty("pDelegate")&&this.config.pDelegate?this.eventsDelegate=this.config.pDelegate:this.eventsDelegate=new SampleEventDelegate,this.eventBuffer=new t.utils.PEventsBuffer,this.eventBuffer.start(),this.skinController=new t.story.skinController,this.skinController.registerWidgets(),this.config.hasOwnProperty("callInitPersonetics")&&1==this.config.callInitPersonetics?this.initPersonetics(function(e){this.isInitialized=!0,i(e)}.bind(this),s):(this.isInitialized=!0,i&&i())}},this.notifyEvent=function(e,t,n){this.eventBuffer&&(this.config.hasOwnProperty("enableNotifyEvents")&&1==this.config.enableNotifyEvents||e.eventMessage.eventInfo.hasOwnProperty("type")&&"Navigation"===e.eventMessage.eventInfo.type)&&this.eventBuffer.addEventToSend(e,t,n)},this.startWidget=function(e){if(null==e)throw{message:"personetics.startWidget Error: invalid widget configuration object"};t.log("personetics.startWidget() called");var i=n("body");e.hasOwnProperty("el")&&(i=e.el);var s=function(){t.UI.PWidgetFactory.createWidget("master",e).start(i),e.hasOwnProperty("callbackOnSuccess")&&void 0!==e.callbackOnSuccess&&e.callbackOnSuccess()};this.isInitialized?s():(e.base64EncodeResponse=!1,this.initialize(e,s,function(n){t.log("Failed to call initPersonetics"),t.UI.PWidgetFactory.createWidget("master",e).start(i)}))},this.initPersonetics=function(e,t){var n={postData:{type:this.urls.INIT_PERSONETICS,mode:this.config.mode,predefinedFile:this.config.predefinedFile,isPredefined:this.config.isPredefined}};this.pserverProxy.getData(n,e,t)},this.getConfig=function(){return this.config},this.getInsights=function(e,t,n,i){var s={type:this.urls.GET_INSIGHTS,bankInfo:e};void 0!==i&&null!=i&&(s.autoGenerate=i);var r={postData:s};this.pserverProxy.getData(r,t,n)},this.getInboxInsights=function(e,t,n){var i={postData:{type:this.urls.GET_INBOX_INSIGHTS,bankInfo:e}};this.pserverProxy.getData(i,t,n)},this.getInsightStory=function(e,t,n){var i=this.urls.GET_INSIGHT_STORY,s=this.urls.STORY_SERVLET;if(this.config.useServiceServlet||(e.servletName=s),!e.hasOwnProperty("id")||!e.hasOwnProperty("insightId"))throw"personetics.getInsightStory(): Usage: getInsightStory(id, insightId)";e.type=i;var r={postData:e};this.pserverProxy.getData(r,t,n)},this.getInsightDetails=function(e,t,n){if(!e.hasOwnProperty("insightId"))throw"personetics.getInsightDetails(): Usage: getInsightDetails(userId, insightId)";var i=this.urls.GET_INSIGHT_DETAILS;e.type=i;var s={postData:e};this.pserverProxy.getData(s,t,n)},this.getInsightStoryData=function(e,t,n){var i={postData:{type:this.urls.GET_INSIGHT_STORY_DATA}};if(!e.hasOwnProperty("id")||!e.hasOwnProperty("insightId"))throw"personetics.getInsightStoryData(): Usage: getInsightStoryData(id, insightId)";this.pserverProxy.getData(i,t,n)},this.getInsightStoryDefinition=function(e,t,n){var i={postData:{type:this.urls.GET_INSIGHT_STORY_DEFINITION}};if(!e.hasOwnProperty("id")||!e.hasOwnProperty("insightId"))throw"personetics.getInsightStoryDefinition(): Usage: getInsightStoryDefinition(id, insightId)";this.pserverProxy.getData(i,t,n)},this.getInsightStoryTexts=function(e,t,n){var i={postData:{type:this.urls.GET_INSIGHT_STORY_TEXTS}};if(!e.hasOwnProperty("id")||!e.hasOwnProperty("insightId"))throw"personetics.getInsightStoryTexts(): Usage: getInsightStoryTexts(id, insightId)";this.pserverProxy.getData(i,t,n)},this.getInsightMessages=function(e,t,n){var i=this.urls.GET_MESSAGE_HISTORY,s={postData:{type:i}};this.pserverProxy.getData(s,i,t,n)},this.generateInsights=function(e,t,n){var i=this.urls.GENERATE_INSIGHTS,s={postData:{bankInfo:e}};this.pserverProxy.getData(s,i,t,n)},this.getInsightRating=function(e,t,n){var i=this.urls.GET_INSIGHT_RATINGS;e.type=i;var s={postData:e};if(!e.hasOwnProperty("id"))throw"personetics.getInsightRating(): Usage: getInsightRating(id)";this.pserverProxy.getData(s,t,n)},this.updateInsightRating=function(e,t,n){var i=this.urls.UPDATE_INSIGHT_RATINGS;e.type=i;var s={postData:e};if(!e.hasOwnProperty("id")||!e.hasOwnProperty("rating"))throw"personetics.updateInsightRating(): Usage: updateInsightRating(id, rating)";this.pserverProxy.getData(s,t,n)},this.updateInsightFeedback=function(e,t,n){var i=this.urls.UPDATE_INSIGHT_FEEDBACK;e.type=i;var s={postData:e};if(!e.hasOwnProperty("id"))throw"personetics.updateInsightFeedback(): Usage: updateInsightFeedback(id, rating)";this.pserverProxy.getData(s,t,n)},this.getQueryData=function(e,t,n){var i=this.urls.GET_STORY_QUERY_DATA,s=this.urls.STORY_SERVLET;e.type=i,this.config.useServiceServlet||(e.servletName=s);var r={postData:e};if(!e.hasOwnProperty("queryName")||!e.hasOwnProperty("queryParams"))throw"personetics.getQueryData(): Usage: getQueryData(queryName, queryParams)";this.pserverProxy.getData(r,t,n)},this.handlePServerResponse=function(e,t){this.pserverProxy.hasOwnProperty("handlePServerResponse")&&n.isFunction(this.pserverProxy.handlePServerResponse)&&this.pserverProxy.handlePServerResponse(e,t)},this.sendWidgetEvent=function(e,t,n){var i=this.getJSBridge();i&&i.widgetEvent(e,t,n)},this.getJSBridge=function(){return this.eventsDelegate},this.getSkinController=function(){return this.skinController},this.getDeviceType=function(){return this.config.deviceType},this.getProjectConfigValue=function(e){return t.projectConfiguration.getConfig(e)},this.setProjectConfiguration=function(e){t.projectConfiguration.setConfig(e)}},e.personetics=t.API.personetics}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){var s=function(){this.texts={en:{lblaccSelectAll:"All accounts",lblaccSelectChoose:"Choose account",lblaccSelectAccount:"Account No.",lblaccSelectAccountAccessibility:"Account number",lblAccessibiliotyAccountSelectorText:"This is an account selector",lbljanuary:"January",lblfebruary:"February",lblmarch:"March",lblapril:"April",lblmay:"May",lbljune:"June",lbljuly:"July",lblaugust:"August",lblseptember:"September",lbloctober:"October",lblnovember:"November",lbldecember:"December",lbljanShort:"JAN",lblfebShort:"FEB",lblmarShort:"MAR",lblaprShort:"APR",lblmayShort:"MAY",lbljunShort:"JUN",lbljulShort:"JUL",lblaugShort:"AUG",lblsepShort:"SEP",lbloctShort:"OCT",lblnovShort:"NOV",lbldecShort:"DEC",lblstoryRating:"How helpful was this insight?",lblfeedbackprompt1:"what didn't you like about this insight?",lblfeedbackprompt2:"what didn't you like about this insight?",lblfeedbackprompt3:"Tell us your opinion of this insight",lblfeedbackprompt4:"That's great! Tell us why you liked this insight",lblfeedbackprompt5:"That's great! Tell us why you liked this insight",btnsubmit:"Submit",lblreactionFeedback:"Thank you for the feedback!",txlistAccNumber:"Account",txlistDescription:"Transaction",txlistDate:"Date",txlistAmount:"Amount",lblgoToInbox:"View All",lbllogout:"Log Out",lblmode:"Mode",lblpreviewMode:"Preview",lblbubbleMode:"Bubble",ttlinbox:"Smart Engage",ttlinboxstory:"Insights Inbox",ttlinboxAll:"All",ttlinboxUnread:"Unread",ttlinboxHighlighted:"Highlighted",insightsNoInsighsTexts:"Nothing to report",insightsOptOutTeaserText:"You've chosen not to receive insights",insightsLoadInsights:"Checking for Insights",ttlsettings:"Advanced Settings",lblsettingsServer:"Server",lblsettingsChannel:"Channel",lblpasswordMode:"Password Required",ttlloginPage:"Sign In",lbluser:"User",lblpassword:"Password",btnlogin:"Continue",btnadvanced:"Advanced",insightsNoInsightsAccessibilityText:"There are no new insights",insightsOptOutTeaserAccessibilityText:"You have chosen not to receive insights",accessFloatingButton:"Launcher",insightsErrorText:"There's been a problem loading Insights. Check back soon.",storyErrorText:"There's been a problem loading story. Check back soon.",accessibilityStoryBackButtonText:"back",teaserErrorText:"There's been a problem loading teaser. Check back soon",accessibilityPieTitle:"This is a PI chart – it shows a breakdown of sums",accessibilityNextCategory:"Double tap to select next section.",accessibilityPreviousCategory:"Previous category",accessibilitySelectedCategoryTitle:"Selected category",accessibilitySliceLbl:"slice",accessibilityOfLbl:"of",accessibilityBarChartTitle:"this is a bar chart",accessibilityPinGraphTitle:"this is a pin graph",accessibilityLineGraphTitle:"this is a line chart",accessibilityLineGraphHighlightedDot:"highlighted dot",accessibilitySeries:"series",accessibilitySeriesIn:"series in",accessibilitySeriesOut:"series out",accessibilityOutOfTxt:"out of",accessibilitySelected:"selected",accessibilityNotSelected:"not selected",accessibilityTableTitle:"This table presents a list of transactions.",accessibilityTableStart:"Table start.",accessibilityTableEnd:"Table end.",accessibilityRatingLevelTitle:"rating level",multiTeasersTitleText:"Smart Engage",lblbalance:"Balance",lblaccSelectNextAcc:"show next account",lblaccSelectPreviousAcc:"show previous account",accessibilityIntroducePersonetics:"Story: Personetics Engage is a new breed of banking solution that puts your needs first. It provides timely and useful insights that keep you informed and help you stay on top of your financial affairs.  Account Activity: We will discover your account activity trends, highlight important events, and flag unusual events.Cash flow forecast: We will predict your cash flow, inform you ahead of time if your balance may not be enough to cover upcoming expenses and remind you about upcoming payments. Financial Education: We will suggest specific steps to increase savings, reduce debt, and improve your financials. In addition, we can help you create and automate a savings plan to meet your financial objectives.  Spending Analysis: We will help you compare your spending between months and across categories, so you can see where your money goes and how your spending changes. Customize your Insights: Get more out of Personetics by rating the insights that you receive. That way, we can adjust what we share with you and focus on what matters most.",noInsigthsTextFirstMsg:"There are no insights for you right now",noInsigthsTextSecondMsg:"We will let you know when you receive new ones",nothingToShowHere:"We didn't find anything to show here",inboxTechnicalIssues:"Something is wrong. Please try again later or contact Personetics support",lblScheduled:"Scheduled",lblEstimated:"Estimated",lblAnticipated:"anticipated",whoops:"Whoops",invalidInsigthsErrMsg:"This insight seems to be invalid.Please Choose a diffrent one or contact Personetics support.",wrong:"Wrong",right:"Right",OhNo:"Oh No!"}}};s.prototype.getText=function(e,n){var i,s=n||e,r=this.lang;return(i=this.texts.hasOwnProperty(r)?this.texts[r]:this.texts.en).hasOwnProperty(e)&&(s=i[e]),s==e&&t.log("Personetics.dictionary.getText('"+e+"', '"+r+"') Error: failed to find text"),s},s.prototype.overrideLanguageTexts=function(e,t){if(this.texts.hasOwnProperty(e))for(var n in t)t.hasOwnProperty(n)&&(this.texts[e][n]=t[n]);else this.texts[e]=t},s.prototype.setLanguage=function(e){this.lang=e},t.dictionary=new s}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){personetics.startWidget=function(i){if(null==i)throw{message:"personetics.startWidget Error: invalid widget configuration object"};if(e.skinSetup){var s=i.filter;null==s&&(i.filter="teaser-widget-carousel"!=i.widgetType)}var r=n.extend(!0,{},i),o=n("body");i.hasOwnProperty("el")&&(o=i.el),"undefined"!=typeof SampleEventDelegate&&null!==SampleEventDelegate&&n.isFunction(SampleEventDelegate)&&(r.eventsDelegate=new SampleEventDelegate),r.base64EncodeResponse=!1,r.requestHeaders=r.requestHeaders||{},r.requestHeaders.authToken=i.userId;personetics.initialize(r,function(e){void 0!==e&&e.hasOwnProperty("projectConfiguration")&&void 0!==e.projectConfiguration&&t.projectConfiguration.setConfig(e.projectConfiguration);t.UI.PWidgetFactory.createWidget("master",r).start(o)},function(e){t.log("Failed to call initPersonetics"),t.UI.PWidgetFactory.createWidget("master",i).start(o)})}}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t,n,i){t.dictionary.overrideLanguageTexts("en",{lblaccSelectAll:"All accounts",lblaccSelectChoose:"Choose account",lblaccSelectAccount:"Account",lbljanuary:"Jan",lblfebruary:"Feb",lblmarch:"Mar",lblapril:"Apr",lblmay:"May",lbljune:"Jun",lbljuly:"Jul",lblaugust:"Aug",lblseptember:"Sep",lbloctober:"Oct",lblnovember:"Nov",lbldecember:"Dec",lbljanShort:"Jan",lblfebShort:"Feb",lblmarShort:"Mar",lblaprShort:"Apr",lblmayShort:"May",lbljunShort:"Jun",lbljulShort:"Jul",lblaugShort:"Aug",lblsepShort:"Sep",lbloctShort:"Oct",lblnovShort:"Nov",lbldecShort:"Dec",lblfeedbackprompt1:"Why didn't you like this insight?",lblfeedbackprompt2:"How can we make this insight better?",lblfeedbackprompt3:"How can we make this insight better?",lblfeedbackprompt4:"Yay! Tell us what you liked.",lblfeedbackprompt5:"5 stars? We're flattered. Tell us more.",btnsubmit:"Send",lblthanksFeedback:"Thanks!",lblreactionFeedback:"Thanks!",txlistDescription:"Transaction",txlistDate:"Date",txlistAmount:"Amount",txlistBalance:"",storyErrorText:"Well, this is awkward… we can't show this insight right now. Try again in a few.",inboxTechnicalIssues:"Well, this is awkward… we can't show this insight right now. Try again in a few.",OhNo:"Oh, no!"})}(window,window.Personetics=window.Personetics||{},jQuery);